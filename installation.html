<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; PyRate 0.6.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Usage" href="usage.html" />
    <link rel="prev" title="PyRate documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="index.html">
            <img src="_static/PyRate_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    <li><a href="https://geoscienceaustralia.github.io/PyRate/">Home</a></li>
    
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#platforms">Platforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#verify-installation">Verify Installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="usage.html#configuration">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#workflow">Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#input-files">Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#parallel-processing">Parallel Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="usage.html#results-visualisation">Results Visualisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">PyRate Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pyrate.conv2tif.html">PyRate Conv2tif Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyrate.prepifg.html">PyRate Prepifg Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyrate.correct.html">PyRate Correct Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyrate.merge.html">PyRate Merge Script</a></li>
<li class="toctree-l2"><a class="reference internal" href="pyrate.main.html">PyRate Main Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">PyRate Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="algorithm.html">Algorithm Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="aps.html">Atmospheric Phase Screen Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuration Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="covariance.html">Covariance Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="demerror.html">DEM Error Correction Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="gamma.html">GAMMA Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometry.html">Geometry Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdal_python.html">GDAL-Python Bindings Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ifgconstants.html">Ifgconstants Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="logger.html">Logging Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpiops.html">MPI operations Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mst.html">Minimum Spanning Tree Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="orbital.html">Orbital Error Correction Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="phase_closure.html">Phase Closure Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="prepifg_helper.html">Prepifg Helper Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref_phs_est.html">Reference Phase Calculation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="refpixel.html">Reference Pixel Calculation Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="roipac.html">ROI_PAC Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="shared.html">Shared Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="stack.html">Stacking Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="timeseries.html">Time Series Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#valueerror-too-many-values-to-unpack-expected-2">ValueError: too many values to unpack (expected 2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#stack-rate-map-appears-to-be-blank-empty">Stack Rate map appears to be blank/empty</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#failure-of-aps-spatial-low-pass-filter">Failure of APS spatial low pass filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#out-of-memory-errors">Out of memory errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html#incorrect-modules-loaded-on-gadi">Incorrect modules loaded on Gadi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#types-of-contributions">Types of Contributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html#pull-request-guidelines">Pull Request Guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a><ul>
<li class="toctree-l2"><a class="reference internal" href="authors.html#development-lead">Development Lead</a></li>
<li class="toctree-l2"><a class="reference internal" href="authors.html#contributors">Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Release History</a><ul>
<li class="toctree-l2"><a class="reference internal" href="history.html#id1">0.6.1 (2022-02-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id2">0.6.0 (2021-10-18)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id5">0.5.0 (2020-09-08)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id10">0.4.3 (2020-08-04)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id15">0.4.2 (2020-06-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id20">0.4.1 (2020-05-19)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id25">0.4.0 (2019-10-31)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id29">0.3.0 (2019-07-26)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id34">0.2.0 (2017-05-22)</a></li>
<li class="toctree-l2"><a class="reference internal" href="history.html#id35">0.1.0 (2017-01-31)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Releasing a version</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release.html#prepare-the-release">Prepare the release</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html#review-and-publish-on-github">Review and publish on GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="release.html#publish-release-to-pypi">Publish release to PyPi</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyRate</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Installation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="index.html" class="btn btn-neutral float-left" title="PyRate documentation" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="usage.html" class="btn btn-neutral float-right" title="Usage" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This is an installation guide to get <cite>PyRate</cite> running on various platforms.
Follow the instructions to install <cite>PyRate</cite> and run a small toy example using
the test dataset included in the repository.</p>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>The following dependencies need to be on your system (or in your working
environment) prior to <cite>PyRate</cite> installation:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.python.org/downloads/">Python</a>, versions 3.7, 3.8 or 3.9.</p></li>
<li><p><a class="reference external" href="https://gdal.org/download.html">GDAL</a>, versions 3.0.2 or 3.0.4</p></li>
</ul>
<p>The following optional dependency should be on your system if you want to make
use of MPI processing:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.open-mpi.org/software/ompi/v4.0/">Open MPI</a>, versions 2.1.6, 3.0.4, 3.1.4 or 4.0.2</p></li>
</ul>
<p>The versions of each package stated above have been tested to work using
<a class="reference external" href="https://github.com/GeoscienceAustralia/PyRate/actions">GitHub Actions</a> continuous integration testing.</p>
<p>Other Python dependencies that will be installed are listed in
<code class="docutils literal notranslate"><span class="pre">PyRate/requirements.txt</span></code>.</p>
</section>
<section id="platforms">
<h2>Platforms<a class="headerlink" href="#platforms" title="Permalink to this headline">¶</a></h2>
<section id="pypi">
<h3>PyPI<a class="headerlink" href="#pypi" title="Permalink to this headline">¶</a></h3>
<p><cite>PyRate</cite> and its Python dependencies can be installed directly from the
Python Package Index (<a class="reference external" href="https://pypi.org/project/Py-Rate/">PyPI</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">Py</span><span class="o">-</span><span class="n">Rate</span>
</pre></div>
</div>
</section>
<section id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p>These instructions have been tested using Ubuntu 18.04. If using another
Linux distribution, you will have to install packages equivalent to those
listed in <code class="docutils literal notranslate"><span class="pre">PyRate/scripts/apt_install.sh</span></code>.</p>
<p>Clone the repository, install required packages and install <cite>PyRate</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>git clone git@github.com:GeoscienceAustralia/PyRate.git
./PyRate/scripts/apt_install.sh

# Add GDAL includes to C/CPLUS paths before building Python GDAL bindings.
export C_INCLUDE_PATH=$C_INCLUDE_PATH:/usr/include/gdal
export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/usr/include/gdal

python3 setup.py install
</pre></div>
</div>
<p>These commands will compile the executable program <code class="docutils literal notranslate"><span class="pre">pyrate</span></code>.</p>
</section>
<section id="docker">
<h3>Docker<a class="headerlink" href="#docker" title="Permalink to this headline">¶</a></h3>
<p>Docker can be used to run <cite>PyRate</cite> on Linux, Windows and MacOS systems.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>Docker is the recommended method to use <cite>PyRate</cite> under Windows.</p></li>
</ul>
</aside>
<p>The only system pre-requisites for using docker are Git and Docker Desktop
(e.g. for Windows <a class="reference external" href="https://docs.docker.com/docker-for-windows/">https://docs.docker.com/docker-for-windows/</a> ).
The other system dependencies required by PyRate are installed in to the
docker container itself during the build operation.
Once Git and Docker Desktop are installed, and Docker Desktop is running,
execute the following at a command line prompt (e.g. PowerShell in Windows 10):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="n">GeoscienceAustralia</span><span class="o">/</span><span class="n">PyRate</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">PyRate</span>
<span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">pyrate</span><span class="o">-</span><span class="n">image</span> <span class="o">.</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">it</span> <span class="n">pyrate</span><span class="o">-</span><span class="n">image</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>The image name “pyrate-image” is not mandatory.
You are free to name the docker image whatever you choose.</p></li>
</ul>
</aside>
<p>The <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> command builds the docker container described in the
<code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code> in the <cite>PyRate</cite> repo. It first starts by setting up an Ubuntu linux
system image, and then installs the required system and python dependencies.</p>
<p>Once the docker container is running (you will see a different-looking command
prompt in the PowerShell), execute the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">virtualenvwrapper</span><span class="o">.</span><span class="n">sh</span>
<span class="n">workon</span> <span class="n">pyrate</span>
<span class="n">cd</span> <span class="n">PyRate</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
<span class="n">pyrate</span> <span class="o">--</span><span class="n">help</span>
<span class="n">pyrate</span> <span class="n">workflow</span> <span class="o">-</span><span class="n">f</span> <span class="n">input_parameters</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pyrate</span></code> executable program is built as part of the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> step.
If the <code class="docutils literal notranslate"><span class="pre">pyrate</span></code> executable is reported as “not found”, re-run the compilation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">PyRate</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
</section>
<section id="hpc">
<h3>HPC<a class="headerlink" href="#hpc" title="Permalink to this headline">¶</a></h3>
<p>These instructions have been written for the Gadi supercomputer of the
<a class="reference external" href="https://nci.org.au/">National Computational Infrastructure (NCI)</a>. The process for other
HPC platforms may differ.</p>
<p>Login to Gadi and clone the <cite>PyRate</cite> repository:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ssh</span> <span class="o">&lt;</span><span class="n">user_name</span><span class="o">&gt;</span><span class="nd">@gadi</span><span class="o">.</span><span class="n">nci</span><span class="o">.</span><span class="n">org</span><span class="o">.</span><span class="n">au</span>
<span class="n">cd</span> <span class="o">~</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">GeoscienceAustralia</span><span class="o">/</span><span class="n">PyRate</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Load the required Gadi modules (this will also remove the default NCI GDAL
Python bindings so we can build and use our own):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">PyRate</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">nci_load_modules</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Create a Python virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="o">~/</span><span class="n">PyRateVenv</span>
<span class="n">source</span> <span class="o">~/</span><span class="n">PyRateVenv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
</pre></div>
</div>
<p>Install <cite>PyRate</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">PyRate</span>
<span class="n">python3</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>Following this, <cite>PyRate</cite> will be available for PBS jobs. To verify the
installation, first run an interactive session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">qsub</span> <span class="o">-</span><span class="n">I</span> <span class="o">-</span><span class="n">q</span> <span class="n">express</span> <span class="o">-</span><span class="n">l</span> <span class="n">walltime</span><span class="o">=</span><span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">,</span><span class="n">mem</span><span class="o">=</span><span class="mi">16</span><span class="n">Gb</span><span class="p">,</span><span class="n">ncpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">wd</span>
</pre></div>
</div>
<p>Once the session has started, you will need to reactivate your virtual
environment and reload the required modules.
There is a call to activate the virtual environment built into the
script below so this can be completed with a single command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/</span><span class="n">PyRate</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">nci_load_modules</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</section>
</section>
<section id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Permalink to this headline">¶</a></h2>
<p>To verify <cite>PyRate</cite> has been successfully installed, run the full processing
workflow with the example config file and the small dataset included
in the repository. If you compiled the <code class="docutils literal notranslate"><span class="pre">pyrate</span></code> executable program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pyrate</span> <span class="n">workflow</span> <span class="o">-</span><span class="n">f</span> <span class="n">input_parameters</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>If you installed from the Python Package Index (<a class="reference external" href="https://pypi.org/project/Py-Rate/">PyPI</a>), you won’t have a
<code class="docutils literal notranslate"><span class="pre">pyrate</span></code> executable program. Instead use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">pyrate</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">py</span> <span class="n">workflow</span> <span class="o">-</span><span class="n">f</span> <span class="n">input_parameters</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p>If the installation has been successful, this workflow will complete without
errors and output geotiff files will be generated in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">~/</span><span class="n">PyRate</span><span class="o">/</span><span class="n">out</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Geoscience Australia.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<p>placeHolderText</p>
        <!-- your html code here -->
 


</body>
</html>